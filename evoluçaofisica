<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ares RPG - EvoluÃ§Ã£o FÃ­sica</title>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>
    <style>
        :root { --primary: #3b82f6; --danger: #ef4444; --success: #22c55e; --warning: #fbbf24; --bg: #0f172a; }
        body { 
            font-family: 'Segoe UI', sans-serif; 
            background: #0f172a; color: #f8fafc; padding: 15px;
        }
        .card { 
            background: rgba(30, 41, 59, 0.9); padding: 20px; border-radius: 15px; 
            border: 1px solid rgba(51, 65, 85, 0.5); margin-bottom: 15px;
        }
        .stat-box { background: rgba(51, 65, 85, 0.6); padding: 10px; border-radius: 10px; text-align: center; border: 1px solid #475569; }
        input { width: 100%; padding: 10px; margin: 5px 0; border-radius: 8px; border: none; box-sizing: border-box; }
        button { cursor: pointer; padding: 10px; border: none; border-radius: 8px; color: white; font-weight: bold; width: 100%; }
        .btn-physic { background: #ef4444; margin-top: 5px; font-size: 12px; }
        .btn-back { background: #3b82f6; margin-bottom: 20px; text-decoration: none; display: block; text-align: center; }
    </style>
</head>
<body>

    <a href="index.html" class="btn-back">â¬… Voltar ao Painel Principal</a>

    <div class="card">
        <h3>ðŸ”¥ EvoluÃ§Ã£o FÃ­sica (Limite +10/dia)</h3>
        <div id="grid-fisico" style="display:grid; grid-template-columns:1fr 1fr; gap:10px;"></div>
    </div>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyBanevR51ejaTE0ccqlmlU6VRh7Qg4EETs",
            authDomain: "aresrpg-7daf4.firebaseapp.com",
            databaseURL: "https://aresrpg-7daf4-default-rtdb.firebaseio.com",
            projectId: "aresrpg-7daf4",
            storageBucket: "aresrpg-7daf4.firebasestorage.app",
            messagingSenderId: "153757603214",
            appId: "1:153757603214:web:fb572985353c8fad7f80df"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database(), auth = firebase.auth();
        let jogadorAtual = "", dadosGerais = {};

        auth.onAuthStateChanged(u => {
            if(u) {
                jogadorAtual = u.email.split('@')[0].replace(/[.#$[\]]/g, "_");
                db.ref('rpg_data').on('value', s => { 
                    dadosGerais = s.val() || {}; 
                    atualizarTreinos(); 
                });
            } else { window.location.href = "index.html"; }
        });

        function atualizarTreinos() {
            const p = dadosGerais[jogadorAtual] || {records:{}};
            const g = document.getElementById('grid-fisico'); g.innerHTML = "";
            const exArr = [
                {id:'supino', n:'ðŸ’ª Supino Reto', m:'kg', c:'#3b82f6', d:20},
                {id:'biceps_rosca', n:'ðŸ’ª BÃ­ceps Rosca', m:'kg', c:'#3b82f6', d:15},
                {id:'leg_press', n:'ðŸ¦µ Leg Press 45', m:'kg', c:'#f59e0b', d:30},
                {id:'stamina', n:'è·‘ Cardio', m:'min', c:'#ec4899', d:10}
                // Adicione os outros aqui se desejar...
            ];

            exArr.forEach(ex => {
                const r = (p.records && p.records[ex.id]) !== undefined ? p.records[ex.id] : ex.d;
                g.innerHTML += `<div class="stat-box" style="border-top: 3px solid ${ex.c};">
                    <b style="color:${ex.c}">${ex.n}</b><br><span>Rec: ${r}${ex.m}</span>
                    <input type="number" id="in-${ex.id}" placeholder="+">
                    <button class="btn-physic" style="background:${ex.c}" onclick="upFisico('${ex.id}','${ex.m}',${r})">UP</button>
                </div>`;
            });
        }

        function upFisico(id, m, r) {
            const val = parseInt(document.getElementById('in-' + id).value);
            const p = dadosGerais[jogadorAtual];
            if (!val || val <= r) return alert("Supera o recorde!");
            
            const aumento = val - r;
            let g = (m === 'kg') ? aumento * 100 : aumento * 45;
            
            const novosRecords = { ... (p.records || {}) }; novosRecords[id] = val;
            db.ref('rpg_data/' + jogadorAtual).update({ 
                xp: (p.xp || 0) + g, 
                coins: (p.coins || 0) + g, 
                records: novosRecords 
            }).then(() => alert("Treino Registrado!"));
        }
    </script>
</body>
</html>
